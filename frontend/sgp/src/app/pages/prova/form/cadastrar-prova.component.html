<app-loading></app-loading>
<app-alert></app-alert>
<p-dialog
  header="{{ titulo }}"
  [(visible)]="exibir"
  [style]="{ width: '85%' }"
  [modal]="true"
>
  <!-- <h1 style="margin-top: 0px;">{{ titulo }}</h1> -->
  <section style="margin-top: 14px;">
    <div *ngIf="!visualizando" class="card-header">
      <h3 style="margin-bottom: 0px;">Selecione as questões desejadas.</h3>
      <p style="margin-top: 4px;">
        As questões disponíveis são visíveis à esquerda. As questões
        selecionadas são visíveis à direita.
      </p>
    </div>

    <div class="card-body">
      <form [formGroup]="provaForm">
        <span class="ui-float-label">
          <input
            [size]="inputSize"
            formControlName="titulo"
            id="float-input1"
            pInputText
          />
          <label for="float-input1" style="margin-top: 4px;">
            Título
          </label>
        </span>
        <span class="ui-float-label" style="margin-top: 12px;">
          <input
            [size]="inputSize"
            autocomplete="off"
            formControlName="percentualDeAprovacao"
            id="float-input"
            max="100"
            min="0"
            pInputText
            type="number"
          />
          <label for="float-input" style="margin-top: 4px;">
            Percentual de Aprovação
          </label>
        </span>
        <div *ngIf="!visualizando" class="pick-with-pag">
          <p-pickList
            [source]="origemQuestoes"
            [target]="destinoQuestoes"
            sourceHeader="Questões Disponíveis"
            targetHeader="Questões Selecionadas"
            [responsive]="true"
            dragdrop="true"
            [sourceStyle]="{ height: '300px' }"
            [targetStyle]="{ height: '300px' }"
            [showSourceControls]="false"
            [showTargetControls]="false"
            (onMoveToTarget)="onMoveToTarget()"
          >
            <ng-template let-questao pTemplate="item">
              <div class="ui-helper-clearfix">
                {{ questao.id }}
                <div
                  style="font-size: 14px; float: right; margin: 15px 5px 0 0;"
                >
                  {{ questao.descricao }}
                </div>
              </div>
            </ng-template>
          </p-pickList>
          <div class="paginator">
            <p-paginator
              (onPageChange)="paginate($event)"
              [totalRecords]="totalDeQuestoes"
              pageLinkSize="3"
              rows="20"
            ></p-paginator>
          </div>
        </div>
        <div *ngIf="visualizando" style="margin-top: 12px;">
          <p-accordion [multiple]="true">
            <div *ngFor="let questao of destinoQuestoes">
              <p-accordionTab header="Questão {{ questao.id }}">
                {{ questao.descricao }}
                <br />
                1 - Alternativa 1
                <br />
                2 - Alternativa 2
                <br />
                3 - Alternativa 3
                <br />
                Resposta correta: 2
              </p-accordionTab>
            </div>
          </p-accordion>
        </div>
        <footer *ngIf="!visualizando">
          <button
            pButton
            class="ui-button-secondary"
            type="button"
            (click)="onCancel()"
            label="CANCELAR"
          ></button>
          <button
            pButton
            type="button"
            (click)="onSubmit()"
            [disabled]="!isFormValid"
            label="SALVAR"
          ></button>
        </footer>
      </form>
    </div>
  </section>
</p-dialog>
